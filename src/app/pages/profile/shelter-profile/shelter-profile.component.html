<div class="container">
	<div class="d-flex flex-row align-items-center mb-3">
		<a routerLink="/">Inicio</a><mat-icon fontIcon="arrow_right" /><a
			routerLink="/gallery"
			>Refugios</a
		>
	</div>
	@if (errorMessage) {
	<div>{{ errorMessage }}</div>
	} @if (shelter$ | async; as shelter) {
	<mat-card appearance="outlined">
		<div class="d-flex flex-column align-items-center mt-5 mb-2">
			<img
				mat-card-image
				src="https://picsum.photos/200/200/?blur"
				alt="{{ shelter.nombre }}"
				class="ratio-1x1 rounded-circle"
			/>
		</div>
		<mat-card-content class="p-4">
			<h1 class="fw-bold text-center">{{ shelter.nombre }}</h1>
			<span>Información</span>
			<div class="shelter-details row row-cols-2 mt-2">
				<div class="col d-flex flex-column gap-2">
					<div class="d-flex flex-row align-items-center gap-2">
						<mat-icon fontIcon="home" />
						<span
							><span class="fw-bold">Dirección:</span>
							{{ shelter.direccion }}</span
						>
					</div>
					<div class="d-flex flex-row align-items-center gap-2">
						<mat-icon fontIcon="phone" />
						<span
							><span class="fw-bold"> Celular:</span>
							{{ shelter.celular }}</span
						>
					</div>
				</div>
				<div class="col d-flex flex-column gap-2">
					<div class="d-flex flex-row align-items-center gap-2">
						<mat-icon fontIcon="location_on" />
						<span
							><span class="fw-bold"> Ciudad:</span>
							{{ shelter.ciudad }}</span
						>
					</div>
					<div class="d-flex flex-row align-items-center gap-2">
						<mat-icon fontIcon="location_on" />
						<span
							><span class="fw-bold"> Provincia:</span>
							{{ shelter.provincia }}</span
						>
					</div>
					<div class="d-flex flex-row align-items-center gap-2">
						<mat-icon fontIcon="location_on" />
						<span
							><span class="fw-bold">País:</span>
							{{ shelter.pais }}</span
						>
					</div>
				</div>
			</div>
		</mat-card-content>
		@if (pets$ | async; as pets) {
		<div class="d-flex flex-column gap-4">
			<h2 class="fw-bold text-center">
				Listado de mascotas de
				<span>
					{{ shelter.nombre }}
				</span>
			</h2>
			@if (canEdit()) {
			<a
				mat-flat-button
				class="w-50 align-self-center"
				[routerLink]="['/shelter', shelter.id, 'create']"
			>
				Añadir Mascota
			</a>
			}
			<ul
				class="list-unstyled row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-5 g-3 p-2"
			>
				@for (pet of pets; track pet.id) {
				<li class="col">
					<mat-card appearance="outlined" class="pet-card border-0">
						<mat-card-content
							class="d-flex flex-row align-items-start p-0 flex-md-column"
						>
							<img
								mat-card-image
								src="https://picsum.photos/200/200/?blur"
								alt="{{ pet.nombre }}"
								class="pet-img ratio-1x1"
							/>
							<div
								class="d-flex flex-column px-4 align-items-start p-3 w-100"
							>
								<div
									class="d-flex flex-column flex-md-row justify-content-md-between w-100"
								>
									<h3 class="fw-bold">{{ pet.nombre }}</h3>
									<a
										mat-stroked-button
										[routerLink]="[
											'/shelter',
											shelter.id,
											'pet',
											pet.id
										]"
										>Ver perfil</a
									>
								</div>
								@if (canEdit()) {
								<div class="d-flex flex-row gap-2 mt-3">
									<a
										mat-mini-fab
										[routerLink]="[
											'/shelter',
											shelter.id,
											'pet',
											pet.id,
											'edit'
										]"
									>
										<mat-icon fontIcon="edit" />
									</a>
									<a
										mat-mini-fab
										[routerLink]="[
											'/shelter',
											shelter.id,
											'pet',
											pet.id,
											'delete'
										]"
									>
										<mat-icon fontIcon="delete" />
									</a>
								</div>
								}
							</div>
						</mat-card-content>
					</mat-card>
				</li>
				}
			</ul>
		</div>
		}</mat-card
	>
	}
</div>
